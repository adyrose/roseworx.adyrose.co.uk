!function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/",i(i.s=359)}({1:function(t,e,i){"use strict";var s=i(2);const n={EasingFunctions:{linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:(4-2*t)*t-1},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}},sanitizeEasing(t,e){return n.EasingFunctions[t]||this[e+"Easing"]?t:(this[e+"Easing"]=!0,Object(s.c)(`no '${t}'' easing function for id - ${e}, falling back to 'linear' timing.`,"(rwxAnimateHelpers)"),"linear")},sanitizeDuration(t,e){return Number.isInteger(t)||this[e+"Duration"]?t:(this[e+"Duration"]=!0,Object(s.c)(`duration for id - ${e} must be an integer, falling back to '1000'.`,"(rwxAnimateHelpers)"),1e3)},easingFunction(t,e,i){this[i]||(this[i]=performance.now());let s=(performance.now()-this[i])/e,o=n.EasingFunctions[t](s);return performance.now()-this[i]>e?1:o.toFixed(8)},deleteVars(t){delete this[t+"Easing"],delete this[t+"Duration"],delete this[t+"Ease"]}},o={getEasingValue:function(t,e="linear",i=1e3,s=(()=>{})){if(!t)return;this[t+"Easing"]||(this[t+"Easing"]=n.sanitizeEasing(e,t)),this[t+"Duration"]||(this[t+"Duration"]=n.sanitizeDuration(i,t));let o=n.easingFunction(this[t+"Easing"],this[t+"Duration"],t+"Ease",s);return o>=1?(s(),n.deleteVars(t),1):o},fromTo:function(t,e,i,s="linear",n=1e3,r=(()=>{})){let a=o.getEasingValue(i,s,n,r);return o.fromToCalc(t,e,a)},fromToCalc:function(t,e,i){return t+(e-t)*i},fromToBezier:function(t,e,i,s,o,r="linear",a=1e3,h=(()=>{})){if(!o)return;this[o+"Easing"]||(this[o+"Easing"]=n.sanitizeEasing(r,o)),this[o+"Duration"]||(this[o+"Duration"]=n.sanitizeDuration(a,o));let l=n.easingFunction(this[o+"Easing"],this[o+"Duration"],o+"Ease",h),u=3*(e.x-t.x),c=3*(i.x-e.x)-u,d=s.x-t.x-u-c,m=3*(e.y-t.y),p=3*(i.y-e.y)-m,g=s.y-t.y-m-p,f=d*(l*l*l)+c*(l*l)+u*l+t.x,b=g*(l*l*l)+p*(l*l)+m*l+t.y;return l>=1?(n.deleteVars(o),h(),{x:s.x,y:s.y}):{x:f,y:b}}};e.a=o},11:function(t,e,i){"use strict";const s={randomInt:(t,e)=>Math.floor(Math.random()*(e-t+1)+t),randomFloat:(t,e)=>Math.random()*(e-t)+t};e.a=s},2:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"a",(function(){return o})),i.d(e,"c",(function(){return r}));var s=i(3);i(4);class n{constructor(t,e=!1){t&&(this.internalMap={}),this.resourceName=this.constructor.name,this.execute?(this.execute=this.execute.bind(this),window.addEventListener("load",()=>{t?[...document.querySelectorAll(t)].map(t=>{const i=e?this.execute(t,t.hasAttribute("data-rwx-manual-control")):this.execute(t);this.addIME(t.id,i)}):this.execute()})):this.error("No execute method (this.execute) defined on instance.")}validateParameter(t,e,i){return typeof t===e||(this.error(`<${i}> expected parameter of type ${e} but got ${typeof t}.`),!1)}commence(t){const e=this.getIME(t);e&&e.scrolledIntoView()}getIMES(){return this.internalMap}addIME(t,e){let i=t;i?this.internalMap[i]&&this.error(`Duplicate ID #${t} detected. Things may not work as expected, please use unique ID's per Component.`):i=s.a.uniqueId(),this.internalMap[i]=e}getIME(t){return this.internalMap&&this.internalMap[t]?this.internalMap[t]:(Object.keys(this.internalMap).length>0&&this.error(`No element detected with id - ${t} \n[rwx] Possible ID's on this page are - ${Object.keys(this.internalMap).join(", ")}`),!1)}addEvent(t,e,i,s){if(!e||!s||!this.validateParameter(s,"function","addEvent"))return;const n=this.getIME(t);n&&!n.customEventsEnabled||n&&n.addEvent(e,s,i)}error(t){r(t,`{Core} (${this.resourceName})`)}}class o{constructor(t){this.resourceName=this.constructor.name,t&&(t.enableCustomEvents&&(this.customEventsEnabled=!0,this.availableEvents=[]),t.enableAnimationLoop&&(this.stopAnimation=!0,this.animateLoop=this.animateLoop.bind(this)),t.enableResizeDebounce&&(this.debounceThreshold=250,this.resizeDebounce()),t.enableScrollIntoView&&(this.stopScroll=!1,this.setScrollTrigger(200),this.scrollEvent=this.scrollEvent.bind(this),this.scroll()),t.enableMouseTracking&&(this.mouse={},this.lastmouse={},this.mousedEvent=this.mousedEvent.bind(this),window.addEventListener("mousemove",this.mousedEvent),window.addEventListener("touchmove",this.mousedEvent)))}mousedEvent(t){if(this.canvasDimensions=this.canvas.getBoundingClientRect(),t.target!==this.canvas)return;let e="touchmove"==t.type?t.touches[0].pageX:t.clientX;e-=this.canvasDimensions.left;let i="touchmove"==t.type?t.touches[0].pageY:t.clientY;i-=this.canvasDimensions.top,this.mouse={x:e,y:i},this.moused&&this.moused(),this.lastmouse=this.mouse}declareEvent(t){this[t]=[],this.availableEvents.push(t)}addEvent(t,e,i){this.availableEvents.includes(i)?"function"==typeof e?this[i].push({id:t,event:e}):this.error("addEvent - event parameter must be a function."):this.error("No custom event detected with name - "+i)}executeEvent(t,e){if(0==this[t].length)return;const i=this[t].filter(t=>t.id==e);0!=i.length&&i.map(t=>t.event())}setScrollTrigger(t){this.scrollTriggerOffset=window.innerHeight-t}scroll(){this.scrollErrorReported=!1,setTimeout(()=>{this.scrollEvent()},500),window.addEventListener("scroll",this.scrollEvent)}scrollEvent(){if(this.stopScroll)return;if(!this.scrolledIntoView)return void(this.scrollErrorReported||(this.error("No scrolledIntoView method (this.scrolledIntoView) defined on instance."),this.scrollErrorReported=!0));if(!this.el)return void(this.scrollErrorReported||(this.error("No element (this.el) defined on instance."),this.scrollErrorReported=!0));this.el.getBoundingClientRect().top<this.scrollTriggerOffset&&this.scrolledIntoView()}resizeDebounce(){this.debounceErrorReported=!1,window.addEventListener("resize",()=>{this.debounce&&clearTimeout(this.debounce),this.debounce=setTimeout(()=>{this.resize?this.resize():this.debounceErrorReported||(this.error("No resize method (this.resize) defined on instance."),this.debounceErrorReported=!0)},this.debounceThreshold)})}startAnimation(){this.stopAnimation=!1,this.animateLoop()}animateLoop(){this.animate?this.stopAnimation||(requestAnimationFrame(this.animateLoop),this.c&&this.canvas&&this.c.clearRect(0,0,this.canvas.width,this.canvas.height),this.animate()):this.error("No animate method (this.animate) defined on instance.")}error(t){r(t,`{Component} (${this.resourceName})`)}}const r=(t,e)=>{console.warn(`[rwx] ${e} - ${t}`)}},3:function(t,e,i){"use strict";const s={uniqueIdList:[],uniqueId:()=>{const t="_"+Math.random().toString(36).substr(2,12);return s.uniqueIdList.includes(t)?s.uniqueId():(s.uniqueIdList.push(t),t)},setCookie:(t,e,i)=>{var s=new Date;s.setDate(s.getDate()+i);var n=escape(e)+(null==i?"":"; expires="+s.toUTCString());document.cookie=t+"="+n},getCookie:t=>{var e,i,s,n=document.cookie.split(";");for(e=0;e<n.length;e++)if(i=n[e].substr(0,n[e].indexOf("=")),s=n[e].substr(n[e].indexOf("=")+1),(i=i.replace(/^\s+|\s+$/g,""))==t)return unescape(s)},safeCloneArrayOfObjects:t=>{let e=[...t];return e.map((t,i)=>{e[i]=s.safeCloneObject(e[i])}),e},safeCloneObject:t=>Object.assign({},t),safeCloneArray:t=>[...t],shuffleArray:t=>{for(let e=t.length-1;e>0;e--){const i=Math.floor(Math.random()*(e+1));[t[e],t[i]]=[t[i],t[e]]}}};e.a=s},343:function(t,e,i){},35:function(t,e,i){"use strict";i(2);e.a=class{constructor(t){this.target=t,this.target.classList.add("rwx-animateable-border"),this.target.style.position="relative",this.paddingX=60,this.paddingY=40,this.active=this.active.bind(this),this.unactive=this.unactive.bind(this),window.requestAnimationFrame(()=>{this.measurements()})}active(){this.activated=!0,this.el.classList.add("active")}unactive(){this.unactivated=!0,this.el.classList.remove("active")}recalculate(){this.target.removeChild(this.el),this.measurements()}measurements(){let t=this.target.getBoundingClientRect(),e=t.width+this.paddingX,i=t.height+this.paddingY,s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttributeNS(null,"width",e),s.setAttributeNS(null,"height",i),s.style.top=`-${this.paddingY/2}px`,s.style.left=`-${this.paddingX/2}px`;let n=document.createElementNS("http://www.w3.org/2000/svg","rect");n.setAttributeNS(null,"width",e),n.setAttributeNS(null,"height",i),n.setAttributeNS(null,"stroke-dasharray",`${i} ${e}`),n.setAttributeNS(null,"stroke-dashoffset","-"+2*e),s.appendChild(n),this.el=s,this.target.appendChild(s)}}},359:function(t,e,i){"use strict";i.r(e);var s=i(1),n=i(11),o=i(2),r=i(35);class a extends o.b{constructor(){super(),this.counter=0,this.speed=12,this.autoStop=!0,this.timeBeforeAutoStop=10,this.spin=this.spin.bind(this),this.stopSpin=this.stopSpin.bind(this)}execute(){this.htmlDefinition(),this.stopNode.addEventListener("click",this.stopSpin)}accessible(){this.el.setAttribute("tabIndex",1),this.el.focus(),this.keyDown=t=>{t.preventDefault(),(32==t.keyCode||13==t.keyCode)&&this.stopSpin()},this.el.addEventListener("keydown",this.keyDown)}unaccessible(){this.el.removeAttribute("tabIndex"),this.el.removeEventListener("keydown",this.keyDown)}setConfig(t){t?(void 0!==t.stopText&&(this.stopText.innerText=t.stopText,this.button.recalculate()),void 0!==t.autoStop&&(this.autoStop=Boolean(t.autoStop)),void 0!==t.timeBeforeAutoStop&&"number"==typeof t.timeBeforeAutoStop&&(this.timeBeforeAutoStop=t.timeBeforeAutoStop)):this.error("setConfig - requires an object")}htmlDefinition(){this.tombola=document.createElement("div"),this.tombola.classList.add("rwx-tombola"),this.tombola.id="rwx-tombola",this.el=document.createElement("div"),this.el.classList.add("rwx-tombola-background"),this.tombolaContainer=document.createElement("div"),this.tombolaContainer.classList.add("rwx-tombola-container"),this.stopNode=document.createElement("div"),this.stopNode.classList.add("rwx-tombola-stopper"),this.stopText=document.createElement("button"),this.stopText.classList.add("no-decoration"),this.stopText.classList.add("text"),this.stopText.innerText="Stop",this.stopNode.appendChild(this.stopText),this.tombolaContainer.appendChild(this.tombola),this.el.appendChild(this.tombolaContainer),this.el.appendChild(this.stopNode),document.body.appendChild(this.el),this.button=new r.a(this.stopNode)}setOptions(t){let e,i;this.tombola.innerHTML="",this.items=[];for(let s of t)e=document.createElement("div"),e.classList.add("rwx-tombola-item"),e.setAttribute("data-value",s.value),i=document.createElement("span"),i.appendChild(document.createTextNode(s.displayName)),e.appendChild(i),this.tombola.appendChild(e),this.items.push(e);this.mask=this.items[0].cloneNode(!0),this.tombola.appendChild(this.mask),this.height=this.tombolaContainer.getBoundingClientRect().height,this.maxHeight=(this.items.length+1)*this.height,this.tombola.style.height=this.maxHeight+"px"}stopSpin(){this.pickingWinner||(this.button.active(),this.pickWinner())}validateOptions(t){if(!t)return this.error("setValues - requires an array of objects."),!1;if(t.length<2)return this.error("setValues - requires at least 2 objects."),!1;let e=!1;return t.map(t=>{t.value&&t.displayName||(this.error("setValues - value and displayName required."),e=!0)}),!e}setValues(t){if(this.validateOptions(t)&&!this.spinning)return this.spinning=!0,this.setOptions(t),this.reset(),this.el.classList.add("appear"),this.accessible(),this.spin(),this.countdownInterval=setInterval(()=>{}),this.autoStop&&setTimeout(()=>{this.winner||this.pickWinner()},1e3*this.timeBeforeAutoStop),new Promise((t,e)=>{this.callback=t})}reset(){this.pickingWinner=!1,this.stop=!1,this.winner=null,this.currentScroll=null,this.wait=!1}pickWinner(){this.pickingWinner=!0,this.winner=n.a.randomInt(0,this.items.length-1),this.scrollToWinner=this.winner>this.items.length-3?this.winner*this.height:this.maxHeight-this.height}spin(){if(this.stop)return this.el.classList.remove("appear"),this.spinning=!1,this.callback(this.items[this.winner].getAttribute("data-value")),this.button.unactive(),void this.unaccessible();window.requestAnimationFrame(this.spin),null==this.winner||this.wait?(this.wait=!0,this.tombolaContainer.scrollTop+=this.speed,this.tombolaContainer.scrollTop>=this.maxHeight-this.height&&(this.wait=!1,this.tombolaContainer.scrollTop=0)):(this.currentScroll||(this.currentScroll=this.tombolaContainer.scrollTop,this.mask.innerHTML=this.items[this.winner].innerHTML),this.tombolaContainer.scrollTop=s.a.fromTo(this.currentScroll,this.scrollToWinner,"rwxTombola","easeOutQuad",3e3,()=>{this.stop=!0}))}}var h=new a;i(343),document.getElementById("setValuesDemo").addEventListener("click",()=>{const t=document.getElementById("setValuesVal").value.split("\n"),e=document.getElementById("selectedValue"),i=[];t.map(t=>i.push({value:t,displayName:t})),h.setValues(i).then(t=>{e.innerText=`You got '${t}'`})})},4:function(t,e,i){"use strict";const s={scale:(t,e,i,s)=>{const n=window.devicePixelRatio||1,o=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1,r=n/o;return n!==o?(t.width=i*r,t.height=s*r,t.style.width=i+"px",t.style.height=s+"px"):(t.width=i,t.height=s,t.style.width="",t.style.height=""),e.scale(r,r),r},drawSector:(t,e,i,s,n)=>{t.beginPath(),t.arc(e.x,e.y,i/2,s,n),t.lineWidth=i,t.stroke(),t.closePath()},drawArc:(t,e,i,s,n,o)=>{t.beginPath(),t.arc(e.x,e.y,i-s/2,n,o),t.lineWidth=s,t.stroke(),t.closePath()}};e.a=s}});
//# sourceMappingURL=tombolapage.d90837a8.js.map